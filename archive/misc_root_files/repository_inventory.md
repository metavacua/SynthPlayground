# Repository Inventory: Project Chimera

**Date:** 2025-10-09
**Author:** Jules

## 1. High-Level Summary

This repository, "Project Chimera," is a specialized, self-contained environment designed for the AI agent Jules to perform software engineering tasks under a strict, machine-enforced protocol. The central philosophy is "the protocol is the code," meaning the agent's entire lifecycle is governed by a formal, verifiable, and self-improving system. The primary goal is to create a robust and auditable framework for autonomous agent operation.

## 2. Core Architecture

The system's architecture is built on a two-layered, FSM-based workflow that ensures every task is predictable and verifiable:

*   **Layer 1: The Orchestrator (`tooling/master_control.py`)**: This is the master Finite State Machine (FSM) that governs the agent's lifecycle. It guides the agent through a series of mandatory states: `ORIENTING`, `PLANNING`, `EXECUTING`, `AWAITING_ANALYSIS`, `POST_MORTEM`, and `SELF_CORRECTING`. It is the ultimate authority on the agent's state transitions.
*   **Layer 2: The FDC Toolchain (`tooling/fdc_cli.py`)**: This is a command-line tool that validates the agent's plans (`plan.txt`) against a separate, low-level FSM (`tooling/fdc_fsm.json`). The Orchestrator uses this tool to ensure that no invalid or non-compliant plan is ever executed.

This hierarchical system has evolved into a Context-Free Development Cycle (CFDC), which uses a stack-based approach to allow for modular, nested plans, enhancing the complexity of tasks the agent can handle while still guaranteeing termination.

## 3. Key Directories

*   **`protocols/`**: The source of truth for the agent's governing principles. It contains human-readable (`.md`) and machine-readable (`.json`) files that define all protocols. These are compiled into `AGENTS.md`. The `protocol.schema.json` file ensures all rules are structurally valid.
*   **`tooling/`**: Contains the core operational machinery of the system. This includes the master FSM (`master_control.py`), the plan validator (`fdc_cli.py`), the protocol compiler (`protocol_compiler.py`), and various scripts for self-correction (`self_correction_orchestrator.py`), analysis (`self_improvement_cli.py`), and documentation generation (`doc_generator.py`).
*   **`knowledge_core/`**: The agent's auto-generated, external memory. It stores critical operational data such as the `plan_registry.json` for named sub-plans, `lessons.jsonl` for structured self-improvement, a code `symbols.json` map, and a `dependency_graph.json`. These artifacts are generated by the tooling and used by the agent for context and planning.
*   **`utils/`**: Contains shared utility scripts. The most critical is `logger.py`, which provides a standardized, schema-validated logger to ensure all agent actions are recorded in the `logs/activity.log.jsonl` file for audit and analysis.
*   **`logs/`**: The destination for all structured logs. The `activity.log.jsonl` file is the primary record of agent behavior.
*   **`postmortems/`**: Contains timestamped markdown reports generated at the conclusion of every task. These reports are the input for the self-correction cycle.

## 4. Key Files

*   **`AGENTS.md`**: The master protocol document that the agent must read and adhere to at the start of every task. It is a build artifact generated from the `protocols/` directory and should never be edited directly.
*   **`README.md`**: The main entry point for a human developer to understand the project's purpose and architecture.
*   **`Makefile`**: Provides high-level commands for managing the repository, including `make test` (to run all unit tests), `make AGENTS.md` (to compile protocols), and `make docs` (to generate documentation).
*   **`run.py`**: The single entry point for initiating a new task. It starts the `master_control.py` FSM, kicking off the entire agent workflow.
*   **`LOGGING_SCHEMA.md`**: Defines the strict JSON schema that all log entries in `activity.log.jsonl` must follow.
*   **`requirements.txt`**: Lists the Python package dependencies for the project.
*   **`fsm.json` & `fdc_fsm.json`**: The JSON definitions for the master orchestrator FSM and the plan validation FSM, respectively.